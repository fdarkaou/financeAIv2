import{_ as C,a as L,d as O,b as A,c as M,i as S}from"./CardBox-7b751d6f.js";import{B as j}from"./BreadCrumb-759eb96d.js";import{_ as D}from"./BaseButtons-1de4e2b6.js";import{_ as T}from"./BaseButton-ff604aaf.js";import{_ as N}from"./CardBoxComponentTitle-d7ea4c8e.js";import{m as F,f as q}from"./supastore-c6013ad2.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{r as c,o as i,a as y,w as h,b as e,t as m,c as g,F as b,f as x,g as d,d as V,s as v,e as E,h as w,v as B,i as H,j as U}from"./index-9dad1ecb.js";import{S as W}from"./SuccessError-77b01219.js";import{_ as R}from"./SectionTitleLineWithButton-65f55b8f.js";const z={components:{CardBox:C,CardBoxComponentTitle:N,BaseLevel:L,BaseButtons:D,BaseButton:T,UserAvatar:O},props:{assets:{type:Array,required:!0},metric:{type:String,required:!0}},data(){return{myAlerts:this.assets,metric:this.metric,metricOptions:F,errors:null,user:{},alertsPaginated:[],currentPage:0,perPage:6,loaded:!1}},async created(){await this.updateAlertsPaginated()},watch:{currentPage(){this.alertsPaginated=this.myAlerts.slice(this.perPage*this.currentPage,this.perPage*(this.currentPage+1))}},computed:{numPages(){return this.myAlerts.length===0?0:Math.ceil(this.myAlerts.length/this.perPage)},currentPageHuman(){return this.currentPage+1},pagesList(){const s=[];for(let r=0;r<this.numPages;r++)s.push(r);return s},metricLabel(){const s=this.metricOptions.find(r=>r.id===this.metric);return s?s.label:""}},methods:{updateAlertsPaginated(){const s=this.perPage*this.currentPage,r=s+this.perPage;this.alertsPaginated=this.myAlerts.slice(s,r)},formatValue(s,r){return q(s,r)}}},G={class:"text-xs text-gray-700 uppercase dark:text-gray-400"},I=e("th",null,null,-1),J=e("th",null,"Project",-1),K=e("th",null,"Price",-1),Q=e("th",null,"Marketcap",-1),X={"data-label":"Logo",class:"w-6 h-6"},Y={class:"h-6 w-6"},Z=["src"],$={"data-label":"Name",class:"w-3/12"},ee={class:"text-gray-500 dark:text-slate-400 text-right"},te={"data-label":"Date set up",class:"lg:w-1 whitespace-nowrap"},re={class:"text-gray-500 dark:text-slate-400"},se=["innerHTML"],ae={"data-label":"Rule",class:"lg:w-1 whitespace-nowrap"},oe={class:"text-gray-500 dark:text-slate-400"},le={"data-label":"Active",class:"lg:w-1 whitespace-nowrap"},ne={class:"text-gray-500 dark:text-slate-400"},ie={class:"text-xs text-gray-700 uppercase dark:text-gray-400"},ce=e("th",null,null,-1),ue=e("th",null,"Project",-1),de=e("th",null,"Price",-1),me=e("th",null,"Marketcap",-1),ge={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"};function pe(s,r,p,f,t,n){const a=c("router-link"),u=c("BaseButton"),_=c("BaseButtons"),o=c("BaseLevel"),k=c("CardBox");return i(),y(k,{"has-table":""},{default:h(()=>[e("div",null,[e("table",null,[e("thead",G,[e("tr",null,[I,J,e("th",null,[e("b",null,m(n.metricLabel),1)]),K,Q])]),e("tbody",null,[(i(!0),g(b,null,x(t.alertsPaginated,l=>(i(),g("tr",{key:l.id},[e("th",X,[e("div",Y,[e("img",{src:l.logo?l.logo:"https://cdn4.iconfinder.com/data/icons/leto-weather/64/na_not_available_weather_sun-512.png",alt:"Logo",class:"rounded-full flex justify-center align-center content-center"},null,8,Z)])]),e("td",$,[e("small",ee,[d(a,{to:`/projects/${l.symbol}`},{default:h(()=>[V(m(l.name),1)]),_:2},1032,["to"])])]),e("td",te,[e("small",re,[e("p",{innerHTML:n.formatValue(l[this.$props.metric],this.$props.metric)},null,8,se)])]),e("td",ae,[e("small",oe,m(n.formatValue(l.price,"price")),1)]),e("td",le,[e("small",ne,m(n.formatValue(l.marketcap,"price")),1)])]))),128))]),e("tfoot",ie,[e("tr",null,[ce,ue,e("th",null,[e("b",null,m(n.metricLabel),1)]),de,me])])]),e("div",ge,[d(o,null,{default:h(()=>[d(_,null,{default:h(()=>[d(u,{class:"text-xs text-gray-700 uppercase dark:text-gray-400",label:"Previous",onClick:r[0]||(r[0]=l=>t.currentPage=Math.max(t.currentPage-1,0)),color:s.page===t.currentPage?"lightDark":"whiteDark"},null,8,["color"]),(i(!0),g(b,null,x(n.pagesList.slice(Math.max(t.currentPage-1,0),Math.min(t.currentPage+1,n.numPages)),l=>(i(),y(u,{class:"text-xs text-gray-700 uppercase dark:text-gray-400",key:l,active:l===t.currentPage,label:l+1,color:l===t.currentPage?"lightDark":"whiteDark",small:"",onClick:Ce=>t.currentPage=l},null,8,["active","label","color","onClick"]))),128)),d(u,{class:"text-xs text-gray-700 uppercase dark:text-gray-400",label:"Next",onClick:r[1]||(r[1]=l=>t.currentPage=Math.min(t.currentPage+1,n.numPages-1)),color:s.page===t.currentPage?"lightDark":"whiteDark"},null,8,["color"])]),_:1}),e("small",null,"Page "+m(n.currentPageHuman)+" of "+m(n.numPages),1)]),_:1})])])]),_:1})}const _e=P(z,[["render",pe]]),he={components:{CardBox:C,FilterTable:_e,SuccessError:W},data(){return{success:!1,error:null,assets:{},selectedOption:"price",options:F,selectedComparator:">",comparatorOptions:["=","<",">"],numericalValue:0}},methods:{async submitForm(){await this.fetchFilteredAssetData(),this.success=!0},async fetchFilteredAssetData(){try{let{data:s,errors:r}=await v.from("jsoncoin").select("payload").order("id",{ascending:!1});if(r)return console.error("result"+r);let p=this.numericalValue;this.selectedComparator===">"?p=a=>a[this.selectedOption]>this.numericalValue:this.selectedComparator==="<"?p=a=>a[this.selectedOption]<this.numericalValue:p=a=>a[this.selectedOption]===this.numericalValue;let f=s[0].payload.filter(p);f.sort((a,u)=>u[this.selectedOption]-a[this.selectedOption]);let{data:t,error:n}=await v.from("ultimateframe").select("logo, symbol");this.assets=f.map(a=>{let u=t.find(_=>_.symbol===a.symbol);return u?a.logo=u.logo:a.logo="https://cdn4.iconfinder.com/data/icons/leto-weather/64/na_not_available_weather_sun-512.png",a})}catch(s){console.error("Following errors were found: ",s),this.error=s.message}}}},fe={key:1,class:"py-8"},be={class:"w-full py-4 flex justify-center text-center inline-flex items-center"},ye=["value"],xe=["value"],ke=e("div",{class:"flex justify-center"},[e("button",{type:"submit",class:"text-gray-900 bg-white hover:bg-gray-100 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-gray-600 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 mr-2 mb-2"},[e("img",{class:"w-4 h-4 mr-2",src:"https://cdn3.iconfinder.com/data/icons/simple-web-navigation/165/tick-512.png",alt:"plus"}),V(" Filter coins ")])],-1);function we(s,r,p,f,t,n){const a=c("SuccessError"),u=c("FilterTable"),_=c("CardBox");return i(),g(b,null,[t.success?(i(),y(a,{key:0,type:"success",message:"Coins filtered bro - check it out below: "})):E("",!0),t.success?(i(),g("div",fe,[d(u,{assets:t.assets,metric:t.selectedOption},null,8,["assets","metric"])])):(i(),y(_,{key:2},{default:h(()=>[e("form",{onSubmit:r[3]||(r[3]=U((...o)=>n.submitForm&&n.submitForm(...o),["prevent"]))},[e("div",be,[w(e("select",{"onUpdate:modelValue":r[0]||(r[0]=o=>t.selectedOption=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[(i(!0),g(b,null,x(t.options,o=>(i(),g("option",{value:o.id,required:""},m(o.label),9,ye))),256))],512),[[B,t.selectedOption]]),w(e("select",{"onUpdate:modelValue":r[1]||(r[1]=o=>t.selectedComparator=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[(i(!0),g(b,null,x(t.comparatorOptions,o=>(i(),g("option",{value:o,required:""},m(o),9,xe))),256))],512),[[B,t.selectedComparator]]),w(e("input",{type:"number","onUpdate:modelValue":r[2]||(r[2]=o=>t.numericalValue=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[H,t.numericalValue]])]),ke],32)]),_:1}))],64)}const Pe=P(he,[["render",we]]),ve={components:{LayoutAuthenticated:A,SectionMain:M,BreadCrumb:j,FilterForm:Pe,SectionTitleLineWithButton:R},name:"CoinsFilterView",data(){return{mdiFilterCheckOutline:S,dashboard:{name:"Filter coins"}}}};function Be(s,r,p,f,t,n){const a=c("BreadCrumb"),u=c("SectionTitleLineWithButton"),_=c("FilterForm"),o=c("SectionMain"),k=c("LayoutAuthenticated");return i(),y(k,null,{default:h(()=>[d(o,null,{default:h(()=>[d(a,{projectName:t.dashboard.name,class:"py-4"},null,8,["projectName"]),d(u,{icon:t.mdiFilterCheckOutline,title:"Filter projects based on metrics"},null,8,["icon"]),d(_)]),_:1})]),_:1})}const Ne=P(ve,[["render",Be]]);export{Ne as default};
//# sourceMappingURL=FilterView-bba32fdd.js.map
